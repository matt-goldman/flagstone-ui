<?xml version="1.0" encoding="UTF-8" ?>
<?xaml-comp compile="true" ?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                    xmlns:fs="clr-namespace:FlagstoneUI.Core.Controls;assembly=FlagstoneUI.Core"
                    x:Class="FlagstoneUI.Themes.Material.Theme"
                    xmlns:tokens="clr-namespace:FlagstoneUI.Core.Styles;assembly=FlagstoneUI.Core">
    <ResourceDictionary.MergedDictionaries>
        <tokens:Tokens />
    </ResourceDictionary.MergedDictionaries>

    <!-- Material Design 3 Dark Mode Color Overrides -->
    <!-- These override the light mode defaults from Tokens.xaml when dark mode is active -->

    <!-- Primary colors - Dark mode -->
    <Color x:Key="Color.Primary.Dark">#D0BCFF</Color>
    <Color x:Key="Color.OnPrimary.Dark">#381E72</Color>
    <Color x:Key="Color.PrimaryContainer.Dark">#4F378B</Color>
    <Color x:Key="Color.OnPrimaryContainer.Dark">#EADDFF</Color>

    <!-- Secondary colors - Dark mode -->
    <Color x:Key="Color.Secondary.Dark">#CCC2DC</Color>
    <Color x:Key="Color.OnSecondary.Dark">#332D41</Color>
    <Color x:Key="Color.SecondaryContainer.Dark">#4A4458</Color>
    <Color x:Key="Color.OnSecondaryContainer.Dark">#E8DEF8</Color>

    <!-- Tertiary colors - Dark mode -->
    <Color x:Key="Color.Tertiary.Dark">#EFB8C8</Color>
    <Color x:Key="Color.OnTertiary.Dark">#492532</Color>
    <Color x:Key="Color.TertiaryContainer.Dark">#633B48</Color>
    <Color x:Key="Color.OnTertiaryContainer.Dark">#FFD8E4</Color>

    <!-- Error colors - Dark mode -->
    <Color x:Key="Color.Error.Dark">#F2B8B5</Color>
    <Color x:Key="Color.OnError.Dark">#601410</Color>
    <Color x:Key="Color.ErrorContainer.Dark">#8C1D18</Color>
    <Color x:Key="Color.OnErrorContainer.Dark">#F9DEDC</Color>

    <!-- Surface colors - Dark mode -->
    <Color x:Key="Color.Surface.Dark">#1C1B1F</Color>
    <Color x:Key="Color.OnSurface.Dark">#E6E1E5</Color>
    <Color x:Key="Color.SurfaceVariant.Dark">#49454F</Color>
    <Color x:Key="Color.OnSurfaceVariant.Dark">#CAC4D0</Color>

    <!-- Background colors - Dark mode -->
    <Color x:Key="Color.Background.Dark">#1C1B1F</Color>
    <Color x:Key="Color.OnBackground.Dark">#E6E1E5</Color>

    <!-- Outline colors - Dark mode -->
    <Color x:Key="Color.Outline.Dark">#938F99</Color>
    <Color x:Key="Color.OutlineVariant.Dark">#49454F</Color>

    <!-- Inverse colors - Dark mode -->
    <Color x:Key="Color.InverseSurface.Dark">#E6E1E5</Color>
    <Color x:Key="Color.InverseOnSurface.Dark">#313033</Color>
    <Color x:Key="Color.InversePrimary.Dark">#6750A4</Color>

    <!-- ========================================= -->
    <!-- Control Styles                            -->
    <!-- ========================================= -->

    <!-- ========== FsButton Styles ========== -->

    <!-- Base Button Style (Material Filled Button - Primary) -->
    <Style TargetType="fs:FsButton">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={DynamicResource Color.Primary}, Dark={DynamicResource Color.Primary.Dark}}" />
        <Setter Property="TextColor" Value="{AppThemeBinding Light={DynamicResource Color.OnPrimary}, Dark={DynamicResource Color.OnPrimary.Dark}}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSize.LabelLarge}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Button.None}" />
        <Setter Property="Padding" Value="24,10" />
        <Setter Property="HeightRequest" Value="40" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="Opacity" Value="{DynamicResource Opacity.Disabled}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <!-- Outlined Button Style -->
    <Style x:Key="OutlinedButton" TargetType="fs:FsButton">
        <Setter Property="BackgroundColor" Value="Transparent" />
        <Setter Property="TextColor" Value="{AppThemeBinding Light={DynamicResource Color.Primary}, Dark={DynamicResource Color.Primary.Dark}}" />
        <Setter Property="BorderColor" Value="{AppThemeBinding Light={DynamicResource Color.Outline}, Dark={DynamicResource Color.Outline.Dark}}" />
        <Setter Property="BorderWidth" Value="{DynamicResource BorderWidth.Thin}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSize.LabelLarge}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Button.None}" />
        <Setter Property="Padding" Value="24,10" />
        <Setter Property="HeightRequest" Value="40" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="Opacity" Value="{DynamicResource Opacity.Disabled}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <!-- Text Button Style (No background or border) -->
    <Style x:Key="TextButton" TargetType="fs:FsButton">
        <Setter Property="BackgroundColor" Value="Transparent" />
        <Setter Property="TextColor" Value="{AppThemeBinding Light={DynamicResource Color.Primary}, Dark={DynamicResource Color.Primary.Dark}}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSize.LabelLarge}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Button.None}" />
        <Setter Property="Padding" Value="12,10" />
        <Setter Property="HeightRequest" Value="40" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="Opacity" Value="{DynamicResource Opacity.Disabled}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <!-- Tonal Button Style (Secondary container color) -->
    <Style x:Key="TonalButton" TargetType="fs:FsButton">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={DynamicResource Color.SecondaryContainer}, Dark={DynamicResource Color.SecondaryContainer.Dark}}" />
        <Setter Property="TextColor" Value="{AppThemeBinding Light={DynamicResource Color.OnSecondaryContainer}, Dark={DynamicResource Color.OnSecondaryContainer.Dark}}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSize.LabelLarge}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Button.None}" />
        <Setter Property="Padding" Value="24,10" />
        <Setter Property="HeightRequest" Value="40" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="Opacity" Value="{DynamicResource Opacity.Disabled}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <!-- Secondary Button Style (Uses secondary color) -->
    <Style x:Key="SecondaryButton" TargetType="fs:FsButton">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={DynamicResource Color.Secondary}, Dark={DynamicResource Color.Secondary.Dark}}" />
        <Setter Property="TextColor" Value="{AppThemeBinding Light={DynamicResource Color.OnSecondary}, Dark={DynamicResource Color.OnSecondary.Dark}}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSize.LabelLarge}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Button.None}" />
        <Setter Property="Padding" Value="24,10" />
        <Setter Property="HeightRequest" Value="40" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="Opacity" Value="{DynamicResource Opacity.Disabled}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <!-- Tertiary Button Style (Uses tertiary color) -->
    <Style x:Key="TertiaryButton" TargetType="fs:FsButton">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={DynamicResource Color.Tertiary}, Dark={DynamicResource Color.Tertiary.Dark}}" />
        <Setter Property="TextColor" Value="{AppThemeBinding Light={DynamicResource Color.OnTertiary}, Dark={DynamicResource Color.OnTertiary.Dark}}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSize.LabelLarge}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Button.None}" />
        <Setter Property="Padding" Value="24,10" />
        <Setter Property="HeightRequest" Value="40" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="Disabled">
                        <VisualState.Setters>
                            <Setter Property="Opacity" Value="{DynamicResource Opacity.Disabled}" />
                        </VisualState.Setters>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <!-- Standard Button Style (for compatibility with MAUI Button) -->
    <Style TargetType="Button">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={DynamicResource Color.Primary}, Dark={DynamicResource Color.Primary.Dark}}" />
        <Setter Property="TextColor" Value="{AppThemeBinding Light={DynamicResource Color.OnPrimary}, Dark={DynamicResource Color.OnPrimary.Dark}}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSize.LabelLarge}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Button.None}" />
        <Setter Property="Padding" Value="24,10" />
        <Setter Property="HeightRequest" Value="40" />
    </Style>

    <!-- ========== FsCard Styles ========== -->

    <!-- Base Card Style (Material Filled Card) -->
    <Style TargetType="fs:FsCard">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={DynamicResource Color.SurfaceVariant}, Dark={DynamicResource Color.SurfaceVariant.Dark}}" />
        <Setter Property="BorderColor" Value="Transparent" />
        <Setter Property="BorderWidth" Value="{DynamicResource BorderWidth.None}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Medium}" />
        <Setter Property="Padding" Value="{DynamicResource Space.16}" />
        <Setter Property="Elevation" Value="1" />
    </Style>

    <!-- Outlined Card Style -->
    <Style x:Key="OutlinedCard" TargetType="fs:FsCard">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={DynamicResource Color.Surface}, Dark={DynamicResource Color.Surface.Dark}}" />
        <Setter Property="BorderColor" Value="{AppThemeBinding Light={DynamicResource Color.OutlineVariant}, Dark={DynamicResource Color.OutlineVariant.Dark}}" />
        <Setter Property="BorderWidth" Value="{DynamicResource BorderWidth.Thin}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Medium}" />
        <Setter Property="Padding" Value="{DynamicResource Space.16}" />
        <Setter Property="Elevation" Value="0" />
    </Style>

    <!-- Elevated Card Style (Higher elevation) -->
    <Style x:Key="ElevatedCard" TargetType="fs:FsCard">
        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={DynamicResource Color.Surface}, Dark={DynamicResource Color.Surface.Dark}}" />
        <Setter Property="BorderColor" Value="Transparent" />
        <Setter Property="BorderWidth" Value="{DynamicResource BorderWidth.None}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.Medium}" />
        <Setter Property="Padding" Value="{DynamicResource Space.16}" />
        <Setter Property="Elevation" Value="3" />
    </Style>

    <!-- ========== FsEntry Styles ========== -->

    <!-- Base Entry Style (Material Filled Text Field) -->
    <Style TargetType="fs:FsEntry">
        <Setter Property="Background">
            <Setter.Value>
                <SolidColorBrush Color="{AppThemeBinding Light={DynamicResource Color.SurfaceVariant}, Dark={DynamicResource Color.SurfaceVariant.Dark}}" />
            </Setter.Value>
        </Setter>
        <Setter Property="TextColor" Value="{AppThemeBinding Light={DynamicResource Color.OnSurface}, Dark={DynamicResource Color.OnSurface.Dark}}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSize.BodyLarge}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.ExtraSmall}" />
        <Setter Property="BorderBrush">
            <Setter.Value>
                <SolidColorBrush Color="Transparent" />
            </Setter.Value>
        </Setter>
        <Setter Property="BorderWidth" Value="{DynamicResource BorderWidth.None}" />
        <Setter Property="Padding" Value="16,16,16,8" />
        <Setter Property="HeightRequest" Value="56" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="FocusStates">
                    <VisualState x:Name="Focused">
                        <VisualState.Setters>
                            <Setter Property="BorderBrush">
                                <Setter.Value>
                                    <SolidColorBrush Color="{AppThemeBinding Light={DynamicResource Color.Primary}, Dark={DynamicResource Color.Primary.Dark}}" />
                                </Setter.Value>
                            </Setter>
                            <Setter Property="BorderWidth" Value="2" />
                        </VisualState.Setters>
                    </VisualState>
                    <!-- Normal state is empty - base style properties apply when unfocused -->
                    <VisualState x:Name="Normal" />
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <!-- Outlined Entry Style -->
    <Style x:Key="OutlinedEntry" TargetType="fs:FsEntry">
        <Setter Property="Background">
            <Setter.Value>
                <SolidColorBrush Color="Transparent" />
            </Setter.Value>
        </Setter>
        <Setter Property="TextColor" Value="{AppThemeBinding Light={DynamicResource Color.OnSurface}, Dark={DynamicResource Color.OnSurface.Dark}}" />
        <Setter Property="FontSize" Value="{DynamicResource FontSize.BodyLarge}" />
        <Setter Property="CornerRadius" Value="{DynamicResource Radius.ExtraSmall}" />
        <Setter Property="BorderBrush">
            <Setter.Value>
                <SolidColorBrush Color="{AppThemeBinding Light={DynamicResource Color.Outline}, Dark={DynamicResource Color.Outline.Dark}}" />
            </Setter.Value>
        </Setter>
        <Setter Property="BorderWidth" Value="{DynamicResource BorderWidth.Thin}" />
        <Setter Property="Padding" Value="16,16,16,8" />
        <Setter Property="HeightRequest" Value="56" />
        <Setter Property="VisualStateManager.VisualStateGroups">
            <VisualStateGroupList>
                <VisualStateGroup x:Name="FocusStates">
                    <VisualState x:Name="Focused">
                        <VisualState.Setters>
                            <Setter Property="BorderBrush">
                                <Setter.Value>
                                    <SolidColorBrush Color="{AppThemeBinding Light={DynamicResource Color.Primary}, Dark={DynamicResource Color.Primary.Dark}}" />
                                </Setter.Value>
                            </Setter>
                            <Setter Property="BorderWidth" Value="2" />
                        </VisualState.Setters>
                    </VisualState>
                    <!-- Normal state is empty - base style properties (outline border) apply when unfocused -->
                    <VisualState x:Name="Normal" />
                </VisualStateGroup>
            </VisualStateGroupList>
        </Setter>
    </Style>

    <!-- Switch Style (Material Design Switch) -->
    <!-- Note: FsSwitch control implementation is not in scope for this issue -->
    <!-- This style is provided as a placeholder for when the control is implemented -->
    <Style TargetType="Switch">
        <Setter Property="OnColor" Value="{AppThemeBinding Light={DynamicResource Color.Primary}, Dark={DynamicResource Color.Primary.Dark}}" />
        <Setter Property="ThumbColor" Value="{AppThemeBinding Light={DynamicResource Color.OnPrimary}, Dark={DynamicResource Color.OnPrimary.Dark}}" />
    </Style>
</ResourceDictionary>
